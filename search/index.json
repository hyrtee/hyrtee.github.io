[{"content":"预置条件 kernel开启相关配置项：\nCONFIG_9P_FS=y CONFIG_9P_FS_POSIX_ACL=y CONFIG_9P_FS_SECURITY=y CONFIG_NETWORK_FILESYSTEMS=y CONFIG_NET_9P=y CONFIG_NET_9P_DEBUG=y CONFIG_NET_9P_VIRTIO=y CONFIG_PCI=y CONFIG_PCI_HOST_COMMON=y CONFIG_PCI_HOST_GENERIC=y CONFIG_VIRTIO_PCI=y CONFIG_VIRTIO_BLK=y CONFIG_VIRTIO_NET=y CONFIG_VIRTIO_MMIO=y CONFIG_FUSE_FS=y CONFIG_VIRTIO_FS=y CONFIG_VIRTIO_INPUT=y 宿主机支持相关库\nsudo apt install -y libcap-dev sudo apt install -y libattr sudo apt install -y libattr-dev qemu编译支持virtfs\n./configure --target-list=aarch64-softmmu --enable-kvm --enable-virtfs --enable-slirp --enable-debug 执行步骤 path/to/share：设置成自己在宿主机的要共享的目录\nqemu-system-aarch64 \\ -M virt,secure=on -m 4G -nographic \\ -machine firmware=bl31.bin \\ -fsdev local,id=shareid,path=/path/to/share,security_model=none \\ -device virtio-9p-device,fsdev=shareid,mount_tag=share \\ -device loader,addr=0x1002000000,file=tee.elf \\ --kernel Image \\ --initrd rootfs.cpio.gz ","date":"2023-06-18T03:52:25+08:00","permalink":"https://hyrtee.github.io/2023/qemu%E9%80%9A%E8%BF%879pfs%E5%AE%9E%E7%8E%B0%E5%AE%BF%E4%B8%BB%E6%9C%BA%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB/","title":"Qemu通过9pfs实现宿主机文件共享"}]