<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ATF on Hyrtee's Blog</title><link>https://hyrtee.github.io/tags/atf/</link><description>Recent content in ATF on Hyrtee's Blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 22 Jul 2023 19:43:30 +0800</lastBuildDate><atom:link href="https://hyrtee.github.io/tags/atf/index.xml" rel="self" type="application/rss+xml"/><item><title>åŸºäºŽqemu+gdbï¼Œè°ƒè¯•ATF</title><link>https://hyrtee.github.io/2023/debug-atf-on-qemu/</link><pubDate>Sat, 22 Jul 2023 19:43:30 +0800</pubDate><guid>https://hyrtee.github.io/2023/debug-atf-on-qemu/</guid><description>&lt;p>æ²¡å·¥ä½œä¹‹å‰ï¼Œè¿žATFæ˜¯å•¥éƒ½ä¸çŸ¥é“ðŸ˜‘&lt;/p>
&lt;h2 id="atf-ç®€ä»‹">ATF ç®€ä»‹&lt;/h2>
&lt;p>Arm Trusted Firmwareï¼ŒArmå¯ä¿¡å›ºä»¶ï¼Œå®šä¹‰äº†secure world softwareä¸­çš„ä¸€ç³»åˆ—åº•å±‚æŽ¥å£çš„å‚è€ƒå®žçŽ°ã€‚&lt;/p>
&lt;h2 id="atf-ä¸Šæ‰‹">ATF ä¸Šæ‰‹&lt;/h2>
&lt;p>å­¦ä¹ ATFä¹‹å‰ï¼Œå»ºè®®Documentation+codeæ­é…é£Ÿç”¨ã€‚&lt;/p>
&lt;p>Documentation&lt;/p>
&lt;ol>
&lt;li>å…¥é—¨ï¼šç¬¬ä¸€æ¬¡è®¤è¯†ATFï¼Œåˆæ­¥äº†è§£å®ƒæ˜¯åšä»€ä¹ˆçš„&lt;/li>
&lt;li>è¿›é˜¶
&lt;ul>
&lt;li>é˜…è¯»ä»£ç è¿‡ç¨‹ä¸­ï¼Œæƒ³çŸ¥é“ä¸€äº›å…¨å±€å˜é‡çš„å«ä¹‰ç”¨æ³•ï¼Œå¦‚PROGRAMMABLE_RESET_ADDRESS&lt;/li>
&lt;li>é˜…è¯»ä»£ç è¿‡ç¨‹ä¸­ï¼Œæƒ³çŸ¥é“æŸäº›å…·ä½“å‡½æ•°çš„å«ä¹‰ç”¨æ³•ï¼Œå¦‚plat_ic_raise_el3_sgi&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>äº†è§£æŸäº›æœ¯è¯­å«ä¹‰ï¼Œå¦‚mpidrï¼šMultiprocessor Affinity Register&lt;/li>
&lt;/ol>
&lt;p>code&lt;/p>
&lt;ol>
&lt;li>æ­é…software designåŠä¸€äº›ATFå¯åŠ¨ç›¸å…³çš„åšå®¢ï¼ŒæŒ‰å¯åŠ¨æµç¨‹é¡ºåºæ¥é˜…è¯»&lt;/li>
&lt;li>å°è¯•ä¿®æ”¹å…¶ä¸­éƒ¨åˆ†æŽ¥å£ï¼Œå®žçŽ°è‡ªå·±çš„åŠŸèƒ½ï¼Œå¦‚smcä¸­çš„fast call&lt;/li>
&lt;/ol>
&lt;p>tips&lt;/p>
&lt;ol>
&lt;li>å¿«é€Ÿæ£€ç´¢æŸä¸ªç¬¦å·
&lt;ul>
&lt;li>vscodeï¼šæœ€å·¦ä¾§çš„æ”¾å¤§é•œæœç´¢æ¡†ï¼Œåœ¨é¡¹ç›®å†…æ£€ç´¢&lt;/li>
&lt;li>Linux bashï¼šgrep â€œtextâ€ ./ -nr&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="ç¼–è¯‘-atf">ç¼–è¯‘ ATF&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e06c75">git&lt;/span> &lt;span style="color:#e06c75">clone&lt;/span> &lt;span style="color:#e06c75">https&lt;/span>://&lt;span style="color:#e06c75">github&lt;/span>.&lt;span style="color:#e06c75">com&lt;/span>/&lt;span style="color:#e5c07b">ARM-software&lt;/span>/&lt;span style="color:#e5c07b">arm-trusted&lt;/span>&lt;span style="color:#e06c75">-firmware&lt;/span>.&lt;span style="color:#e06c75">git&lt;/span> &lt;span style="color:#e06c75">-b&lt;/span> &lt;span style="color:#e06c75">v2&lt;/span>.&lt;span style="color:#e06c75">7&lt;/span>.&lt;span style="color:#e06c75">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e5c07b">cd arm-trusted&lt;/span>&lt;span style="color:#e06c75">-firmware&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e06c75">make&lt;/span> &lt;span style="color:#e06c75">PLAT&lt;/span>=&lt;span style="color:#e06c75">qemu&lt;/span> &lt;span style="color:#e06c75">CROSS_COMPILE&lt;/span>=&lt;span style="color:#e5c07b">aarch64-linux&lt;/span>&lt;span style="color:#e06c75">-gnu&lt;/span>- &lt;span style="color:#e06c75">DEBUG&lt;/span>=&lt;span style="color:#d19a66">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="qa">Q&amp;amp;A&lt;/h2>
&lt;p>1.error: unrecognized command-line option â€˜-mstrict-alignâ€™; did you mean â€˜-Wstrict-aliasingâ€™?&lt;/p>
&lt;p>&lt;figure
class="gallery-image"
style="
flex-grow: 1005;
flex-basis: 2414px"
>
&lt;a href="https://hyrtee.github.io/2023/debug-atf-on-qemu/2023-07-23-10-32-37.png" data-size="1539x153">
&lt;img src="https://hyrtee.github.io/2023/debug-atf-on-qemu/2023-07-23-10-32-37.png"
width="1539"
height="153"
srcset="https://hyrtee.github.io/2023/debug-atf-on-qemu/2023-07-23-10-32-37_hu91aa95b88a8f9fb4bd9155c0fdf394eb_309778_480x0_resize_box_3.png 480w, https://hyrtee.github.io/2023/debug-atf-on-qemu/2023-07-23-10-32-37_hu91aa95b88a8f9fb4bd9155c0fdf394eb_309778_1024x0_resize_box_3.png 1024w"
loading="lazy"
>
&lt;/a>
&lt;/figure>&lt;/p>
&lt;p>It seems specify &lt;code>CROSS_COMPILE&lt;/code> by exporting it doesn&amp;rsquo;t work, instead, should be specified at build commandline, i.e:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e06c75">make&lt;/span> &lt;span style="color:#e06c75">PLAT&lt;/span>=&lt;span style="color:#e06c75">qemu&lt;/span> &lt;span style="color:#e06c75">CROSS_COMPILE&lt;/span>=&lt;span style="color:#e5c07b">aarch64-linux&lt;/span>&lt;span style="color:#e06c75">-gnu&lt;/span>- &lt;span style="color:#e06c75">DEBUG&lt;/span>=&lt;span style="color:#d19a66">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>2.failed to find romfile &amp;ldquo;efi-virtio.rom&amp;rdquo;&lt;/p></description></item></channel></rss>