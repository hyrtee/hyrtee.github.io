<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>9pfs on Hyrtee's Blog</title><link>https://hyrtee.github.io/tags/9pfs/</link><description>Recent content in 9pfs on Hyrtee's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sun, 18 Jun 2023 03:52:25 +0800</lastBuildDate><atom:link href="https://hyrtee.github.io/tags/9pfs/index.xml" rel="self" type="application/rss+xml"/><item><title>qemu通过9pfs实现与宿主机共享文件</title><link>https://hyrtee.github.io/posts/qemu/</link><pubDate>Sun, 18 Jun 2023 03:52:25 +0800</pubDate><guid>https://hyrtee.github.io/posts/qemu/</guid><description>预置条件 1.kernel开启相关配置项：
CONFIG_9P_FS=y CONFIG_9P_FS_POSIX_ACL=y CONFIG_9P_FS_SECURITY=y CONFIG_NETWORK_FILESYSTEMS=y CONFIG_NET_9P=y CONFIG_NET_9P_DEBUG=y CONFIG_NET_9P_VIRTIO=y CONFIG_PCI=y CONFIG_PCI_HOST_COMMON=y CONFIG_PCI_HOST_GENERIC=y CONFIG_VIRTIO_PCI=y CONFIG_VIRTIO_BLK=y CONFIG_VIRTIO_NET=y CONFIG_VIRTIO_MMIO=y CONFIG_FUSE_FS=y CONFIG_VIRTIO_FS=y CONFIG_VIRTIO_INPUT=y 2.宿主机支持相关库
sudo apt install -y libcap-dev sudo apt install -y libattr sudo apt install -y libattr-dev 3.qemu编译支持virtfs
./configure --target-list=aarch64-softmmu --enable-kvm --enable-virtfs --enable-slirp --enable-debug 执行步骤 path/to/share：设置成自己在宿主机的要共享的目录
qemu-system-aarch64 \ -M virt,secure=on -m 4G -nographic \ -machine firmware=bl31.bin \ -fsdev local,id=shareid,path=/path/to/share,security_model=none \ -device virtio-9p-device,fsdev=shareid,mount_tag=share \ -device loader,addr=0x1002000000,file=tee.elf \ --kernel Image \ --initrd rootfs.cpio.gz</description></item></channel></rss>